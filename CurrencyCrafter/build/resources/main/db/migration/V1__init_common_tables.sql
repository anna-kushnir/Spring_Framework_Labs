CREATE SCHEMA IF NOT EXISTS CURRENCY_SCHEMA;

CREATE SEQUENCE IF NOT EXISTS CURRENCY_SCHEMA.CURRENCY_SEQ START WITH 1 INCREMENT BY 1;
CREATE TABLE IF NOT EXISTS CURRENCY_SCHEMA.CURRENCY
(
    ID   BIGINT DEFAULT nextval('CURRENCY_SCHEMA.CURRENCY_SEQ'),
    NAME VARCHAR(200) NOT NULL,

    CONSTRAINT PK_CURRENCY PRIMARY KEY (ID),
    CONSTRAINT UQ_CURRENCY_NAME UNIQUE (NAME)
);


CREATE SEQUENCE IF NOT EXISTS CURRENCY_SCHEMA.EXCHANGE_RATE_SEQ START WITH 1 INCREMENT BY 1;
CREATE TABLE IF NOT EXISTS CURRENCY_SCHEMA.EXCHANGE_RATE
(
    ID          BIGINT DEFAULT nextval('CURRENCY_SCHEMA.EXCHANGE_RATE_SEQ'),
    LOCAL_DATE  DATE    NOT NULL,
    RATE        NUMERIC NOT NULL,
    CURRENCY_ID BIGINT  NOT NULL,

    CONSTRAINT PK_EXCHANGE_RATE PRIMARY KEY (ID),
    CONSTRAINT FK_EXCHANGE_RATE_CURRENCY_ID FOREIGN KEY (CURRENCY_ID) REFERENCES CURRENCY_SCHEMA.CURRENCY (ID)
);
